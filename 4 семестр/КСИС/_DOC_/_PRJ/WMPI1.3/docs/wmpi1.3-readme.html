<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="KeyWords" CONTENT="MPI, parallel, distributed, computing, WMPI">
   <TITLE>WMPI 1.3: Docs: MS Visual C - Digital Fortran 6 ReadMe</TITLE>

<STYLE TYPE="text/css">
<!--
H1 {color:white;background-color: black;font-family: courier ; font-size: 12pt;text-align:right}
FONT.divisor {color:white;font-size:16pt;text-transform:capitalize;font-weight:bold;text-align:center}
FONT.topp {color:white;font-size:10pt;text-align:right}
.title {font-weight:bold;font-size:12pt;font-family:Arial}
-->
</STYLE>
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<CENTER>
  <B><FONT SIZE=+2>WMPI 1.3 ReadMe</FONT><BR>
  MS Visual C/Digital Fortran<BR>
  August 1999</B> 
</CENTER>
<BR><BR>
<A NAME="contents"></A>
<TABLE ALIGN=CENTER WIDTH=90% CELLPADDING=0 CELLSPACING=0 BORDER=0>
<TR>
<TD BGCOLOR=black>
<font class=divisor>C O N T E N T S</FONT>
<TR>
<TD BGCOLOR=e7e7e7>
<dd><FONT class=title>0. <A HREF="#intro">Introduction</A></font>
  <TR VALIGN="MIDDLE"> 
    <TD BGCOLOR=#b2b2b2 HEIGHT="47"> 
      <dd><FONT class=title>1. <A HREF="#_Toc424677289">Files</A></font> 
    
  <TR VALIGN="MIDDLE"> 
    <TD BGCOLOR=e7e7e7 HEIGHT="199"> 
      <dd><FONT class=title>2. <A HREF="#_Toc424677293">WMPI source code specifics 
        and Compiling</A></FONT> 
        <UL>
          &nbsp;&nbsp;&nbsp;<B><FONT SIZE=-1>2.1 </FONT></B><A HREF="#_Toc424677294">C</A> 
          <UL>
            <FONT SIZE=-1>2.1.1 </FONT><A HREF="#_Toc424677295">GUI WMPI applications</A> 
            <BR>
            <FONT SIZE=-1>2.1.2 </FONT><A HREF="#con-c">Console WMPI applications</A> 
          </UL>
          &nbsp;&nbsp;&nbsp;<B><FONT SIZE=-1>2.2 </FONT></B><A HREF="#fortran">Fortran</A> 
          <UL>
            <FONT SIZE=-1>2.2.1 </FONT><A HREF="#fortran-gui">GUI WMPI Fortran 
            applications</A> <BR>
            <FONT SIZE=-1>2.2.2 </FONT><A HREF="#fortran-cons">Console WMPI Fortran 
            applications<BR>
            </A><FONT SIZE=-1>2.2.2 </FONT><A HREF="#fortran-strings">Fortran 
            Strings</A> 
          </UL>
        </UL>
    <TR>
<TD BGCOLOR=#b2b2b2>
<dd><FONT class=title>3. <A HREF="#_Toc424677300">Running
a WMPI application</A></FONT>
<UL>
&nbsp;&nbsp;&nbsp;<B><FONT SIZE=-1>3.1 </FONT></B><A HREF="#_Toc424677301">P4 Options</A>
<BR>
&nbsp;&nbsp;&nbsp;<B><FONT SIZE=-1>3.2 </FONT></B><A HREF="#_Toc424677302">The Procgroup
File</A>
</UL>
<BR>
<TR>
<TD BGCOLOR=#e7e7e7>
<dd><FONT class=title>4. <A HREF="#_Toc424677303">Remote
starting</A></FONT>
<TR>
<TD BGCOLOR=#b2b2b2>
<dd><FONT class=title>5. <A HREF="#_Toc424677304">Communication
with MPICH 1.1.2 processes</A></FONT>
<TR>
<TD BGCOLOR=#e7e7e7>
<dd><FONT class=title>6. <A HREF="#_Toc424677314">MPI-IO</A></FONT>
<TR>
<TD BGCOLOR=#FFFFFF>
&nbsp;
<BR>
&nbsp;
<TR>
<TD BGCOLOR=black>
<A HREF=#contents OnMouseOut="window.status='WMPI ReadMe';" OnMouseOver="window.status='back to the top...';return true;"><IMG BORDER=0 ALIGN=RIGHT VALIGN=MIDDLE WIDTH=16 HEIGHT=18 SRC=top.gif alt="Contents"></A>
<A NAME="intro"></A><FONT class="divisor">0.  I N T R O D U C T I O N</FONT>
<TR>
<TD BGCOLOR=#FFFFFF>
<BR>
<P>WMPI v1.3 is a full implementation of the Message Passing Interface
standard (<A HREF="http://www.mcs.anl.gov/mpi/index.html">http://www.mcs.anl.gov/mpi/index.html</A>)
for Microsoft Win32 platforms. It is based on MPICH 1.1.2 (<A HREF="http://www.mcs.anl.gov/mpi/mpich">http://www.mcs.anl.gov/mpi/mpich</A>)
with the ch_p4 device from Argonne National Laboratory/Mississippi State
University (ANL).
<BR>&nbsp;
      <P>WMPI can coexist and interact with MPICH 1.1.2/ch_p4 in a cluster of 
        mixed Win32 (Windows 95 and NT) and UNIX workstations over a TCP/IP network. 
        Thus, most of the commonly available hardware resources can be used for 
        cost effective parallel computing under the MPI standard. WMPI 1.3 has 
        been tested successfully with MPICH 1.1.2 on Linux (Kernel 2.0.35, gcc 
        2.7.2.3 and GNU make 3.77). <BR>
        &nbsp;
      <P>WMPI v1.3 also includes ROMIO, the ANL’s implementation of MPI-IO (the 
        I/O chapter in MPI-2), configured for UFS (ROMIO’s home page is at <A HREF="http://www.mcs.anl.gov/home/thakur/romio">http://www.mcs.anl.gov/home/thakur/romio</A> 
        and the MPI-2 standard’s home page is at <A HREF="http://www.mpi-forum.org/docs/docs.html">http://www.mpi-forum.org/docs/docs.html</A>). 
        <BR>
        &nbsp;
<P>For the implementation of communication internals and startup mechanism,
which are not specified in the MPI standard, WMPI relies on wp4; our Win32 version of p4 (<A HREF="ftp://info.mcs.anl.gov/pub/p4">ftp://info.mcs.anl.gov/pub/p4</A>)
- a previous message passing system from ANL.
<BR>
<BR>
      <P>The WMPI package is a set of libraries (Microsoft Visual C++ 6 and Digital 
        Visual Fortran 6.0). This package provides libraries, include files, some 
        examples and daemons for remote starting. <BR>
        &nbsp;
<P>The WMPI Home Page is at <A HREF="http://dsg.dei.uc.pt/wmpi">http://dsg.dei.uc.pt/wmpi</A>.
<P>For any bug report or suggestion, please contact:
<BR>
<BR>
<CENTER>
<P>&lt;<FONT SIZE=-1><A HREF="mailto:wmpi@dei.uc.pt">wmpi@dei.uc.pt</A></FONT>>
tel.: +351.39.7 90 082
<P>(<A HREF="http://www.dei.uc.pt/">Departamento de Engenharia Inform&aacute;tica</A><I>,
</I><A HREF="http://www.uc.pt/">Univ.
Coimbra</A><I> - Portugal</I>)
<BR>&nbsp;
</CENTER><P><CENTER><B><FONT SIZE=+2>WMPI 1.3</FONT></B>
<BR>
          <B><I>for Microsoft Visual C++ 6 and Digital Visual Fortran 6.0</I></B> 
        </CENTER>
<BR>
<BR>
<TR>
<TD BGCOLOR=black>
<A HREF=#contents OnMouseOut="window.status='WMPI ReadMe';" OnMouseOver="window.status='back to the top...';return true;"><IMG BORDER=0 ALIGN=RIGHT VALIGN=MIDDLE WIDTH=16 HEIGHT=18 SRC=top.gif alt="Contents"></A>
<A NAME="_Toc424677289"></A><FONT class="divisor">1.  F I L E S</FONT>
<TR>
<TD BGCOLOR=#FFFFFF>
<BR>
<BR>&nbsp;
<TABLE BORDER=2 CELLSPACING=2 CELLPADDING=3 WIDTH="640" BORDERCOLOR="black">
<TR>
<TD VALIGN=TOP WIDTH="46%" BGCOLOR=#e7e7e7><B>Location/Files</B></TD>
<TD VALIGN=TOP WIDTH="54%" BGCOLOR=#b2b2b2><B>Description</B></TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Include\<B>*.h</B></TD>
<TD VALIGN=TOP WIDTH="54%">Include files for WMPI applications</TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Include\resource\<B>*.h</B></TD>
<TD VALIGN=TOP WIDTH="54%">Include files and VC++ resources</TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Include\romio\*.h</TD>
<TD VALIGN=TOP WIDTH="54%">Include files for MPI-IO</TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Lib\Gui\<B>vwmpi.dll</B> (.lib), <B>vshell.lib</B></TD>
<TD VALIGN=TOP WIDTH="54%">Release libraries for WMPI GUI C applications</TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Lib\Gui\<B>dvlibf.lib</B></TD>
<TD VALIGN=TOP WIDTH="54%">Release library for WMPI GUI DVF 5.0 applications</TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Lib\Console\<B>cwmpi.dll</B> (.lib)</TD>
<TD VALIGN=TOP WIDTH="54%"><FONT SIZE=-1>Release library for WMPI console
C applications</FONT></TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Lib\Console\<B>cdvlibf.lib</B></TD>
<TD VALIGN=TOP WIDTH="54%"><FONT SIZE=-1>Release library for WMPI console
DVF 5.0 applications</FONT></TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Examples\C</TD>
<TD VALIGN=TOP WIDTH="54%">C examples</TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Examples\C\IO</TD>
<TD VALIGN=TOP WIDTH="54%">ROMIO examples in C</TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">Examples\Fortran</TD>
<TD VALIGN=TOP WIDTH="54%">Fortran examples</TD>
<TR>
<TD VALIGN=TOP WIDTH="46%">System\Daemon\<B>wmpi_daemon.exe</B></TD>
          <TD VALIGN=TOP WIDTH="54%"><A NAME="_Toc424677290"></A>Daemon for remote 
            starting and batch files</TD>
<TR>
          <TD VALIGN=MIDDLE WIDTH="46%">System\serviceNT\<B>wmpi_service.exe</B></TD>
          <TD VALIGN=TOP WIDTH="54%"><A NAME="_Toc424677291"></A>NT service daemon 
            for remote starting and batch files for managing the service &quot;WMPI 
            NT Service&quot;</TD>
</TABLE>

<BR>&nbsp;
<TR>
<TD BGCOLOR=black VALIGN=MIDDLE>
<A HREF=#contents OnMouseOut="window.status='WMPI ReadMe';" OnMouseOver="window.status='back to the top...';return true;"><IMG BORDER=0 ALIGN=RIGHT VALIGN=MIDDLE WIDTH=16 HEIGHT=18 SRC=top.gif alt="Contents"></A>
<A NAME="_Toc424677293"></A><FONT class="divisor">2. W M P I  &nbsp;  s o u r c e  &nbsp;  c o d e  &nbsp;  s p e c i f i c s    &nbsp; a n d    &nbsp;C o m p i l i n g</FONT>
  <TR> 
    <TD BGCOLOR=#FFFFFF> <BR>
      <P><A NAME="_Toc424677294"></A><B><I><FONT FACE="Arial">2.1 C</FONT></I></B> 
        <BR>
        <A NAME="_Toc424677295"></A><FONT FACE="Arial">2.1.1 GUI<B> WMPI applications</B></FONT> 
      <UL>
        <LI> Project Settings <FONT FACE="Symbol">&THORN;</FONT> C <FONT FACE="Symbol">&THORN;</FONT> 
          use run-time library: <B>Multithreaded DLL</B></LI>
        <LI> Files to be included in a WMPI project: <B>vwmpi.lib</B> <FONT FACE="Symbol">&Aring;</FONT> 
          <B>vwmpi.rc</B> <FONT FACE="Symbol">&Aring;</FONT> <B>vshell.lib</B></LI>
        <P ALIGN=center> <IMG SRC=Gui_C.gif WIDTH=577 HEIGHT=372 ALT="Alter the project settings..."> 
          <BR>
          <FONT SIZE=-2>Illustration on how to alter the project settings.</FONT> 
        </P>
        <LI> Some standard I/O functions (<B><I>printf()</I></B>, <B><I>scanf()</I></B>, 
          <B><I>gets()</I></B> and <B><I>puts()</I></B>) are emulated by the <B><I>vshell.lib</I></B> 
          library. <B>Stdin</B>, <B>stdout</B> and <B>stderr</B> are not emulated. 
          As a result the <i>mpi.h</i> include file <b>must</b> follow the <i>stdio.h</i> 
          in your source code.</LI>
        <BR>
        <BR>
        <LI> The main entry point for WMPI programs must be the function <B><I>void 
          <U>m</U>ain(int, char **);</I></B> .</LI>
        <LI> After returning from the <B><I>main()</I></B> function, processes 
          behave as described below:</LI>
      </UL>
      <UL>
        <UL>
          <LI> Slave processes automatically terminate;</LI>
          <LI> the <I>big master</I> process waits for the user to close the window 
            and then automatically terminates.</LI>
        </UL>
      </UL>
      <FONT FACE="Arial">.<A NAME="con-c"></A>2.1.2 Console<B> WMPI applications</B></FONT> 
      <UL>
        <LI> Project Settings <FONT FACE="Symbol">&THORN;</FONT> C <FONT FACE="Symbol">&THORN;</FONT> 
          use run-time library: <B>Multithreaded DLL</B></LI>
        <LI> Files to be included in a WMPI project: <B>cvwmpi.lib</B> <FONT FACE="Symbol">&Aring;</FONT> 
          <B>vwmpi.rc</B></LI>
        <P ALIGN=center> <IMG SRC=Console_C.gif WIDTH=577 HEIGHT=372 ALT="Alter the project settings..."> 
          <BR>
          <FONT SIZE=-2>Illustration of how to alter the project settings, for 
          C console.</FONT> </P>
      </UL>
      <P><A NAME="fortran"></A><B><I><FONT FACE="Arial">2.2 Fortran</FONT></I></B> 
      <P><FONT FACE="Arial"><A NAME="fortran-gui"></A>2.2.1 GUI<B> WMPI Fortran 
        applications</B></FONT> 
      <UL>
        <LI> Project Settings <FONT FACE="Symbol">&THORN;</FONT> C <FONT FACE="Symbol">&THORN;</FONT> 
          use run-time library: <B>Multithreaded DLL</B></LI>
        <LI> Project Settings <FONT FACE="Symbol">&THORN;</FONT> Fortran <FONT FACE="Symbol">&THORN;</FONT> 
          Fortran Libraries: <B>Multithreaded DLL</B></LI>
        <BR>
        <BR>
        <LI> Files to be included in Wmpi a project: <B>vwmpi.lib</B> <FONT FACE="Symbol">&Aring;</FONT> 
          <B>vwmpi.rc <FONT FACE="Symbol">&Aring;</FONT> dvlibf.lib</B></LI>
        <P ALIGN=center> <IMG SRC=Gui_Fortran.gif WIDTH=577 HEIGHT=372 ALT="Alter the project settings..."> 
          <BR>
          <FONT SIZE=-2>Illustration of how to alter the project settings, for 
          Fortran GUI.</FONT> </P>
        <LI> The main entry for WMPI Fortran programs must be a <B>subroutine</B> 
          named <B>MAIN</B>.</LI>
        <LI> Fortran input/output standard calls (e.g., print, read) do not work 
          for GUI applications. To help, <B>dvlibf.lib</B> includes some routines 
          based on the C <I>printf()</I> and <I>scanf()</I> functions:</LI>
      </UL>
      <UL>
        <UL>
          <LI> <B>p_int</B>(<I>integer*4</I>) outputs an integer value;</LI>
        </UL>
      </UL>
      <DIR> 
        <DIR><I>integer*4 x</I> 
          <P><I>x=5</I> 
          <P><I>call p_int(x)</I> 
          <P><I>call p_int(5)</I>)
        </DIR>
      </DIR>
      <UL>
        <UL>
          <LI> <B>p_real</B>(real*4, decimal_places, 0|1) outputs a 4 bytes real 
            value;</LI>
          <LI> <B>p_double</B>(real*8, decimal_places, 0|1) outputs an 8 bytes 
            real value;</LI>
        </UL>
      </UL>
      <DIR> 
        <DIR><I>real*4 y</I> 
          <P><I>real*8 z</I> 
          <P><I>y=123.456</I> 
          <P><I>z=123.456</I> 
          <P><I>call p_real(y, 3, 0)</I> -> Outputs 123.456 
          <P><I>call p_double(z, 4, 1)</I> -> Outputs 1.2346e+003 <BR>
            &nbsp; <BR>
            &nbsp;
        </DIR>
      </DIR>
      <UL>
        <UL>
          <LI> <B>p_str</B>(<I>string</I>) outputs a C string (null terminated);</LI>
        </UL>
      </UL>
      <DIR> 
        <DIR> 
          <DIR><B>CHARACTER*20 hello</B> 
            <P><B>DATA hello /'Hello'C/</B> 
            <P><B>call p_str(‘Hello’C)</B>) 
            <P><I>call p_str(hello)</I> <BR>
              &nbsp; <BR>
              &nbsp; <BR>
              &nbsp; <BR>
              &nbsp;
          </DIR>
        </DIR>
      </DIR>
      <UL>
        <UL>
          <LI> <B>r_int</B>(integer*4 var) reads an integer value;</LI>
        </UL>
      </UL>
      <DIR> 
        <DIR><I>integer*4 i</I> 
          <P><I>call r_int(i)</I> <BR>
            &nbsp; <BR>
            &nbsp;
        </DIR>
      </DIR>
      <UL>
        <UL>
          <LI> <B>r_real</B>() reads a 4 bytes real value;</LI>
        </UL>
      </UL>
      <DIR> 
        <DIR><I>real*4 x</I> 
          <P><I>call r_real(x)</I> <BR>
            &nbsp; <BR>
            &nbsp;
        </DIR>
      </DIR>
      <UL>
        <UL>
          <LI> <B>r_double</B>() reads an 8 bytes real value;</LI>
        </UL>
      </UL>
      <DIR> 
        <DIR><I>real*8 z</I> 
          <P><I>call r_double(z)</I> <BR>
            &nbsp; <BR>
            &nbsp; <BR>
            &nbsp; <BR>
            &nbsp;
        </DIR>
      </DIR>
      <UL>
        <UL>
          <LI> <B>r_str</B>() reads a C string (null terminated).</LI>
        </UL>
      </UL>
      <DIR> 
        <DIR><I>character*40 cstr</I> 
          <P><I>call r_str(cstr)</I> 
          <P><I>call r_str(cstr)</I> <BR>
            &nbsp; <BR>
            &nbsp;
        </DIR>
      </DIR>
      <A NAME="fortran-cons"></A><FONT FACE="Arial">2.2.2 Console<B> WMPI Fortran 
      applications</B></FONT> 
      <UL>
        <LI> Project Settings <FONT FACE="Symbol">&THORN;</FONT> C <FONT FACE="Symbol">&THORN;</FONT> 
          use run-time library: <B>Multithreaded DLL</B></LI>
        <LI> Project Settings <FONT FACE="Symbol">&THORN;</FONT> Fortran <FONT FACE="Symbol">&THORN;</FONT> 
          Fortran Libraries: <B>Multithreaded DLL</B></LI>
      </UL>
      <UL>
        <LI> Files to be included in a Wmpi project: c<B>vwmpi.lib</B> <FONT FACE="Symbol">&Aring;</FONT> 
          <B>vwmpi.rc <FONT FACE="Symbol">&Aring;</FONT> cdvlibf.lib</B></LI>
        <P ALIGN=center> <IMG SRC=Console_Fortran.gif WIDTH=577 HEIGHT=372 ALT="Alter the project settings..."> 
          <BR>
          <FONT SIZE=-2>Illustration on how to alter the project settings, for 
          Fortran console.</FONT> </P>
      </UL>
      <P><BR>
        <FONT FACE="Arial"><A NAME="fortran-strings"></A>2.2.3 <B>Fortran Strings 
        </B></FONT></P>
      <P>In a WMPI program some of the parameters of a MPI routine may be Fortran 
        strings. If no interface is defined for a routine call in your program 
        then you must define the interface and the routine. In order to broadcast 
        the string &quot;Hello World!&quot; to all other processes, one has to 
        redefine the interface to MPI_BCAST. The code follows:</P>
      <TABLE WIDTH="98%" BORDER="0">
        <TR>
          <TD WIDTH="7%">&nbsp;</TD>
          <TD WIDTH="87%"> 
            <P>Program section:</P>
            <BLOCKQUOTE>
              <P>character*(20) string<BR>
                <BR>
                string = 'Hello World!'C<BR>
                call MPI_BCAST(string, 12, MPI_CHAR, 0, MPI_COMM_WORLD, ierr)</P>
            </BLOCKQUOTE>
            <P>&nbsp;</P>
          </TD>
          <TD WIDTH="6%">&nbsp;</TD>
        </TR>
        <TR>
          <TD WIDTH="7%">&nbsp; </TD>
          <TD WIDTH="87%">Interface: 
            <UL>
              <P>&nbsp;&nbsp;INTERFACE MPI_SEND</P>
              <P>&nbsp;&nbsp;SUBROUTINE MPI_BCAST_C(BUFFER, COUNT, DATATYPE, ROOT, 
                COMM,<BR>
                & IERROR)<BR>
                &nbsp;&nbsp;CHARACTER*(*), INTENT(INOUT) :: BUFFER<BR>
                &nbsp;&nbsp;INTEGER, INTENT(IN) :: COUNT<BR>
                &nbsp;&nbsp;INTEGER, INTENT(IN) :: DATATYPE<BR>
                &nbsp;&nbsp;INTEGER, INTENT(IN) :: ROOT<BR>
                &nbsp;&nbsp;INTEGER, INTENT(IN) :: COMM<BR>
                &nbsp;&nbsp;INTEGER, INTENT(OUT) :: IERROR<BR>
                &nbsp;&nbsp;END SUBROUTINE MPI_BCAST_C<BR>
                <BR>
                &nbsp;&nbsp;SUBROUTINE MPI_BCAST_I4(BUFFER, COUNT, DATATYPE, ROOT, 
                COMM,<BR>
                & IERROR)<BR>
                &nbsp;&nbsp;INTEGER(4), INTENT(INOUT) :: BUFFER<BR>
                &nbsp;&nbsp;INTEGER, INTENT(IN) :: COUNT<BR>
                &nbsp;&nbsp;INTEGER, INTENT(IN) :: DATATYPE<BR>
                &nbsp;&nbsp;INTEGER, INTENT(IN) :: ROOT<BR>
                &nbsp;&nbsp;INTEGER, INTENT(IN) :: COMM<BR>
                &nbsp;&nbsp;INTEGER, INTENT(OUT) :: IERROR<BR>
                <BR>
                &nbsp;&nbsp;END INTERFACE MPI_BCAST</P>
            </UL>
            </TD>
          <TD WIDTH="6%">&nbsp;</TD>
        </TR>
        <TR>
          <TD WIDTH="7%">&nbsp;</TD>
          <TD WIDTH="87%"> 
            <P>Routine:</P>
            <UL>
              &nbsp;&nbsp;SUBROUTINE MPI_BCAST_C(BUFFER, COUNT, DATATYPE, ROOT, 
              COMM,<BR>
              & IERROR)<BR>
              &nbsp;&nbsp;CHARACTER*(*), INTENT(INOUT) :: BUFFER<BR>
              &nbsp;&nbsp;INTEGER, INTENT(IN) :: COUNT<BR>
              &nbsp;&nbsp;INTEGER, INTENT(IN) :: DATATYPE<BR>
              &nbsp;&nbsp;INTEGER, INTENT(IN) :: ROOT<BR>
              &nbsp;&nbsp;INTEGER, INTENT(IN) :: COMM<BR>
              &nbsp;&nbsp;INTEGER, INTENT(OUT) :: IERROR<BR>
              <BR>
              &nbsp;&nbsp;EXTERNAL MPI_BCAST_STR<BR>
              &nbsp;&nbsp;CALL MPI_BCAST_STR(BUFFER,COUNT,DATATYPE,ROOT,COMM,IERROR)<BR>
              &nbsp;&nbsp;END SUBROUTINE MPI_BCAST_C<BR>
              <BR>
              &nbsp;&nbsp;SUBROUTINE MPI_BCAST_I4(BUFFER, COUNT, DATATYPE, ROOT, 
              COMM,<BR>
              & IERROR)<BR>
              &nbsp;&nbsp;INTEGER(4), INTENT(INOUT) :: BUFFER<BR>
              &nbsp;&nbsp;INTEGER, INTENT(IN) :: COUNT<BR>
              &nbsp;&nbsp;INTEGER, INTENT(IN) :: DATATYPE<BR>
              &nbsp;&nbsp;INTEGER, INTENT(IN) :: ROOT<BR>
              &nbsp;&nbsp;INTEGER, INTENT(IN) :: COMM<BR>
              &nbsp;&nbsp;INTEGER, INTENT(OUT) :: IERROR<BR>
              <BR>
              &nbsp;&nbsp;EXTERNAL MPI_BCAST<BR>
              &nbsp;&nbsp;CALL MPI_BCAST(BUFFER,COUNT,DATATYPE,ROOT,COMM,IERROR)<BR>
              &nbsp;&nbsp;END SUBROUTINE MPI_BCAST_I4 
              <P></P>
            </UL>
          </TD>
          <TD WIDTH="6%">&nbsp;</TD>
        </TR>
      </TABLE>
      <P>&nbsp;</P>
      <P><BR>
      </P>
  <TR>
<TD BGCOLOR=black>
<A HREF=#contents OnMouseOut="window.status='WMPI ReadMe';" OnMouseOver="window.status='back to the top...';return true;"><IMG BORDER=0 ALIGN=RIGHT VALIGN=MIDDLE WIDTH=16 HEIGHT=18 SRC=top.gif alt="Contents"></A>
<A NAME="_Toc424677300"></A><font class=divisor>3. R U N N I N G&nbsp;&nbsp;
A&nbsp;&nbsp; WMPI&nbsp;&nbsp; A P P L I C A T I O N</FONT>
<TR>
<TD BGCOLOR=#FFFFFF>
<BR>
<A NAME="_Toc424677301"></A><B><FONT FACE="Arial">3.1 P4 Options</FONT></B>
<BR>
<BR>
<UL>
<LI>
WMPI starts with the startup and configuration
mechanisms of the wp4 underlying communication subsystem. This is described
in the p4 user's guide (ftp://info.mcs.anl.gov/pub/p4).</LI>
</UL>

<UL>
<LI>
&nbsp;<B>-p4gm</B> &lt;size> This option sets the global memory size (&lt;size>
by default is 4MB).</LI>
</UL>

<UL>
        <LI> &nbsp;<B>-gmstatic</B> This option deactivates the dynamic memory 
          allocation. Advantage: better performance. Disadvantage: at startup 
          one must allocate all memory that the program may need, see the -p4gm 
          option</LI>
</UL>

<UL>
<LI>
<B>-p4dialog</B> The option -p4dialog can be set in the command line of
a WMPI program (GUI and CONSOLE modes) to display a Dialog Box that
enables the user to choose some startup options.</LI>
</UL>

<UL>
<LI>
<B>-p4noshare</B> By default, WMPI processes that belong to different
clusters on the bm's machine communicate via shared memory. This can be
turned off with the option -p4noshare (for testing TCP/IP connections with
just a computer).</LI>
</UL>

<UL>
<LI>
<B>-p4local</B> To run parallel applications on a standalone IBM-PC compatible
without network facilities just set the option -p4local in the command
line. Target machine names are ignored and all the processes communicate
via shared memory.</LI>
</UL>

<UL>
<LI>
<B>-p4help</B> For more details about command line options try the -p4help
option and refer to the p4 user's guide (ftp://info.mcs.anl.gov/pub/p4).</LI>
</UL>
<BR>&nbsp;
<A NAME="_Toc424677302"></A><B><FONT FACE="Arial">3.2 The Procgroup File</FONT></B>
<BR>
<UL>
<LI>
When a WMPI program is called it looks for a well-known file where
all the processes that belong to the parallel application are statically
specified. This first process, the so-called <I>big master</I> (bm), then
starts the other processes (slaves) and configures the <I>virtual parallel
machine</I>. For MPI programs this is done by the <B><I>MPI_init()</I></B>
routine (that must be the first in an MPI program).</LI>
</UL>
The process group file can be specified following three different approaches:
<BR>
<BR>
<UL>
<DIR>
<DIR>
<UL>
<LI>
with the option <B>-p4pg &lt;procgroup file></B> in the command line of
the user called program;</LI>

<LI>
if the <B>-p4pg</B> is not found in the command line a file with the same
name as the program but with the "<B>.pg</B>" extension will be looked
for;</LI>

<LI>
finally, the file <B>procgrp</B> is looked for.</LI>
</UL>
</DIR>
</DIR>
</UL>
If a process group file cannot be found, the program is aborted. Here is
an example of a procgroup file:
<BR>
<BR>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR><B><I>local 2</I></B>
<P><B><I>speed.dei.uc.pt 2 c:\wmpi\examples\pimpi.exe</I></B>
<P><B><I>pandora.dei.uc.pt 1 /home/fafe/mpiexamples/pi fafe</I></B>
<P><B><I>speed.dei.uc.pt 1 \\speed\fafe-share\examples\pimpi.exe</I></B>
<BR>
</DIR>
</DIR>
</DIR>
</DIR>
</DIR>
This example specifies 7 processes:
<BR>
<BR>
<UL>
<DIR>
<DIR>
            <UL>
              <LI> (implicitly) the user called program (bm)</LI>
              <LI> 2 processes based on the bm executable file</LI>
              <LI> 2 instances of pimpi.exe on speed.dei.uc.pt</LI>
              <LI> 1 instance of pi on pandora.uc.pt (Unix platform). Note: the 
                username <B>must</B> be present otherwise you will not have security 
                clearance to execute the Unix program.</LI>
              <LI> 1 instance of pimpi.exe on speed.dei.uc.pt (Win32 platform) 
                via a network mapped executable file. Note: Since the program is 
                  executed via the WMPI service, the user (under which the service 
                  is running) must have permission to execute the program. Check 
                  the service configuration in the Control Panel to see under 
                  which user the service is running or change the security permissions 
                  of the file. See the 4th paragraph of the Remote starting section 
                  for further details.</LI>
            </UL>
          </DIR>
        </DIR>
      </UL>



      <UL>
        <LI> Each line identifies a cluster, i.e., a set of processes in the specified 
          target machine with the same executable file and that communicate via 
          shared memory. Systems with no shared memory facilities can just have 
          clusters with one process. Processes that belong to different clusters 
          communicate via TCP/IP sockets. Don’t forget the extension ".exe" for 
          Win32 executable files.<BR>
        </LI>
      </UL>
<TR>
<TD BGCOLOR=black>
<A HREF=#contents OnMouseOut="window.status='WMPI ReadMe';" OnMouseOver="window.status='back to the top...';return true;"><IMG BORDER=0 ALIGN=RIGHT VALIGN=MIDDLE WIDTH=16 HEIGHT=18 SRC=top.gif alt="Contents"></A>
<A NAME="_Toc424677303"></A><font class="divisor">4. R E M O T E&nbsp;&nbsp; S T A R T I N G</FONT>
<TR>
<TD BGCOLOR=#FFFFFF>
<BR>
<P>For applications to work properly, the TCP/IP configuration properties
of Win32 platforms must be set correctly (e.g., IP address and DNS configuration).
<BR>
      <P>The <B>wmpi_daemon.exe</B> program must be running on Win32 target machines 
        (to install it as a startup program: <B><I>Start<FONT FACE="Symbol">&THORN;</FONT> 
        Settings<FONT FACE="Symbol">&THORN;</FONT> Taskbar<FONT FACE="Symbol">&THORN;</FONT> 
        Startup Menu Programs<FONT FACE="Symbol">&THORN;</FONT> Add</I></B>). 
        If the option <B>-log</B> is set in the command line, some trace information 
        will be displayed by the daemon.. <BR>
<P>For NT machines, the <B>wmpi_service.exe</B> is an alternative.<BR>To install run the program where you want it installed:
<BR>
<DD><B>wmpi_service.exe install</B>
<BR><BR>To uninstall the service:
<DD><B>wmpi_service.exe remove</B>
<BR>
<BR>
Note that the service's default configuration is set to manual starting. To change these 
settings or to startup the service go to <B><I>Control Panel<FONT FACE="Symbol">&THORN;</FONT>
Services<FONT FACE="Symbol">&THORN;</FONT>WMPI NT Service</I></B>. The <B>wmpi_service.exe</B>
service can be configured to log on to the system account (by default)
or to a user account (created in <B><I>Programs<FONT FACE="Symbol">&THORN;</FONT>
Administrative Tools<FONT FACE="Symbol">&THORN;</FONT> User Manager</I></B>).
With the first option, <B>wmpi_service.exe</B> and remote processes started
by it have administrator permissions, i.e., full control over all the system.
With the second option, permissions are restricted to those defined for
the specified user account and groups that it belongs to. When the program
to be executed in a remote machine is located in another remote machine
(e.g., <B><I>remote1&nbsp; 1&nbsp; \\remote2\examples\pimpi.exe</I></B>),
the service must be logged on to a user account with <U>appropriate permissions</U>.
<BR>
<BR>
<TR>
<TD BGCOLOR=black>
<A HREF=#contents OnMouseOut="window.status='WMPI ReadMe';" OnMouseOver="window.status='back to the top...';return true;"><IMG BORDER=0 ALIGN=RIGHT VALIGN=MIDDLE WIDTH=16 HEIGHT=18 SRC=top.gif alt="Contents"></A>
<A NAME="_Toc424677304"></A><font class=divisor>5. &nbsp;&nbsp;C O M M U N I C A T I O N
&nbsp;&nbsp;W I T H&nbsp;&nbsp; MPICH&nbsp;&nbsp; 1.1.2&nbsp;&nbsp; P R O C E S S E S</FONT>
<TR>
<TD BGCOLOR=#FFFFFF>
<BR>
      <A NAME="_Toc424677306"></A>A few simple modifications have to be done to 
      the MPICH source code before making it in UNIX machines: 
      <UL>
<UL>
<LI>
<A NAME="_Toc424677307"></A>In file mpich/mpid/ch_p4/chconfig.h (line 10)
change (remove from comments)</LI>
</UL>
</UL>
<A NAME="_Toc424677308"></A><B><I>/* #define MPID_NO_FLOW_CONTROL */</I></B>
<DIR>
<DIR><A NAME="_Toc424677309"></A>to</DIR>
</DIR>
<A NAME="_Toc424677310"></A><B><I>#define MPID_NO_FLOW_CONTROL</I></B>
<UL>
<UL>
<LI>
<A NAME="_Toc424677311"></A><B>In file <I>mpid/ch_p4/p4/lib/p4_MD.c</I>
add the following two lines to the data_representation() function (line
1593) :</B></LI>
</UL>
</UL>
<A NAME="_Toc424677312"></A><B><I>if (strcmp(machine_type, "WIN32") ==
0) return 2;</I></B>
<P><A NAME="_Toc424677313"></A><B><I>if (strcmp(machine_type, "WIN32_ALPHA")
== 0) return 2;</I></B>
<BR>&nbsp;
<P>Before compiling MPICH, add the option -DUSE_OLD_SERVER
to the <B>mpich/mpid/ch_p4/p4/lib/Makefile</B> file (look for the line
starting with "CFLAGS =").
<BR>
<P>WMPI tries to start processes on remote UNIX stations via remote
shell (rsh) if <B>iserv_p4.exe</B> is not running on the Unix machine.
If the remote shell is to be used for remote starting a login name must
be supplied in the configuration file and the appropriate <B>.rhosts</B>
files entries must be set for every remote machine.

<BR>
<BR>
<TR>
<TD BGCOLOR=black>
<A HREF=#contents OnMouseOut="window.status='WMPI ReadMe';" OnMouseOver="window.status='back to the top...';return true;"><IMG BORDER=0 ALIGN=RIGHT VALIGN=MIDDLE WIDTH=16 HEIGHT=18 SRC=top.gif alt="Contents"></A>
<A NAME="_Toc424677314"></A><font class=divisor>6. &nbsp;&nbsp;M P I&nbsp;&nbsp;-&nbsp;&nbsp;I O</FONT>
<TR>
<TD BGCOLOR=#FFFFFF>
<BR>
      One of the limitations of ROMIO is that it only works in homogeneous environments 
      and only supports the native file data representation. Specifically, with 
      WMPI, MPI-IO operations are restricted to Microsoft Windows based boxes 
      that are located in the same network. The file name passed to <I>MPI_File_open()</I> 
      must be prefixed with the string "ufs:" and, if a file is located in a neighbouring 
      machine, the name of the machine or an appropriate network mapped drive 
      must be specified in the path. <B><I>ufs:\\PC1\public\README.txt</I></B>, 
      <B><I>ufs:README.txt</I></B> and <B><I>ufs:e:\public\README.txt</I></B> 
      are examples of valid file name strings. <BR>
<BR>
<CENTER>
<HR WIDTH=180>
WMPI 1.3 &copy; DSG-DEI-UC
</CENTER>
</TABLE>
</BODY>
</HTML>
